<!DOCTYPE html>
<html lang='zh-CN'>
<head>
<title>Tips - Noodles 的维基</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="static/css/bootstrap.min.css" media="screen" rel="stylesheet" type='text/css'>
<link href="static/css/bootswatch.min.css" rel="stylesheet" type='text/css'>
<link href="static/css/style.css" rel="stylesheet" type="text/css" >
</head>
<body>
<div class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <a href="./" class="navbar-brand">Noodles 的维基</a>
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
            <ul class="nav navbar-nav">
                <li>
                <a href="http://blog.mark42.net" target="_blank">Blog</a>
                </li>
                <li>
                <a href="http://instagram.com/nirocfz" target="_blank">Instagram</a>
                </li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
                <li><a href="./about-me.html">关于我</a></li>
                <li><a href="http://www.douban.com/people/nirocfz/" target="_blank">豆瓣</a></li>
            </ul>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div class="page-header">
                <h2>Tips</h2>
            </div>
            <div class="bs-component">
                
<h4 id="toc_0.0.0.1">dig 输出“干净”的结果</h4>

<pre>
dig +noall +answer wiki.mark42.net
wiki.mark42.net.	566	IN	A	116.251.209.185
</pre>

<pre>
dig +noall +answer mark42.net ns

mark42.net.        231 IN  NS  ns4.dnsv5.com.
mark42.net.        231 IN  NS  ns3.dnsv5.com.
</pre>

<p>
域名放在 dig 的参数后面，参数顺序也不要变，因为后面的参数“覆盖”前面的参数。
当 <code>dig +short</code> 输出的信息不够，并且需要批量处理一些东西时，这样的输出结果应该更方便操作
</p>


<h4 id="toc_0.0.0.2">yum 安装指定版本的包</h4>
<h5 id="toc_0.0.0.2.1">场景:</h5>

<p>
为了编译一个内核模块，需要安装 kernel-devel, 执行 <code>yum install kernel-devel</code>, 安装之后仍然无法编译内核模块。
</p>

<p>
因为内核版本与 kernel-devel 版本不一致，内核是旧版的，可能因为一些原因不能升级内核，这时需要安装旧版本的 kernel-devel。
</p>

<p>
<code>uname -r</code> 结果是 <code>2.6.32-431.el6.x86_64</code>, <code>/usr/src/kernel/</code> 目录里的是 <code>2.6.32-431.11.2.el6.x86_64</code>
</p>

<h5 id="toc_0.0.0.2.2">步骤:</h5>

<ol>
<li>
查看这个包都有哪些版本 <code>yum --showduplicates list kernel-devel</code>,  找到跟内核版本一致的包
<pre>
[vagrant@vagrant-centos65 kernels]$ yum --showduplicates list kernel-devel
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
Installed Packages
kernel-devel.x86_64               2.6.32-431.11.2.el6                   @updates
Available Packages
kernel-devel.x86_64               2.6.32-431.el6                        base    
kernel-devel.x86_64               2.6.32-431.1.2.0.1.el6                updates 
kernel-devel.x86_64               2.6.32-431.3.1.el6                    updates 
kernel-devel.x86_64               2.6.32-431.5.1.el6                    updates 
kernel-devel.x86_64               2.6.32-431.11.2.el6                   updates
</pre>

<li>
删除已安装的 kernel-devel <code>sudo yum remove kernel-devel</code>

<li>
安装旧版 <code>sudo yum install kernel-devel-2.6.32-431.el6</code>

</ol>

            </div>
            <footer>
                <div class="row">
                    <div class="col-lg-12">
                        <p>
                        Generated by <a href="http://www.vim.org/scripts/script.php?script_id=2226">vimwiki</a> and <a href="http://bootswatch.com">Bootswatch</a>.
                        </p>
                    </div>
                </div>
            </footer>
        </div>
    </div>
</div>
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=32074356" charset="UTF-8"></script>
<script src="http://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-37422134-12']);
_gaq.push(['_trackPageview']);

(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 })();

</script>
</body>
</html>
