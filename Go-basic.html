<!DOCTYPE html>
<html lang='zh-CN'>
<head>
<title>Go 基础 - Noodles 的维基</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="static/css/bootstrap.min.css" media="screen" rel="stylesheet" type='text/css'>
<link href="static/css/bootswatch.min.css" rel="stylesheet" type='text/css'>
<link href="static/css/style.css" rel="stylesheet" type="text/css" >
<link rel="stylesheet" href="static/highlight/styles/solarized_dark.css">
</head>
<body>
<div class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <a href="./" class="navbar-brand">Noodles 的维基</a>
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
            <ul class="nav navbar-nav">
                <li>
                <a href="http://blog.mark42.net" target="_blank">Blog</a>
                </li>
                <li>
                <a href="http://instagram.com/nirocfz" target="_blank">Instagram</a>
                </li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
                <li><a href="./about-me.html">关于我</a></li>
                <li><a href="http://www.douban.com/people/nirocfz/" target="_blank">豆瓣</a></li>
            </ul>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div class="page-header">
                <h2>Go 基础</h2>
            </div>
            <div class="bs-component">
                

<p>
这里只是记一下 C 里有，但是 Go 跟 C 很不一样的地方，大都是从 <a href="A Tour of Go.html">A Tour of Go</a> 看来的
</p>

<hr />

<h3 id="toc_0.0.1">函数</h3>

<p>
声明语法
</p>
<pre>
func 函数名(没有参数，或多个参数) 任意数量的返回值 {

}
</pre>

<p>
连续的参数类型相同时，可以省略前面的类型，只写最后一个类型
</p>
<pre class="go">
func add(x, y int) int {
    return x + y
}
</pre>

<p>
命名返回值
</p>
<pre class="go">
package main

import "fmt"

func split(sum int) (x, y int) {
    x = sum * 4 / 9;
    y = sum -x
    return
}

func main() {
    fmt.Println(split(17))
}
</pre>

<p>
上面的函数 <code>split</code> 返回了 x, y 两个“结果参数”(7, 10)
</p>

<h3 id="toc_0.0.2">变量</h3>
<p>
定义
</p>

<pre class="go">
var i, j int = 1, 2
var c, python, java = true, false, "no!"
a, b, c := true, false, "no!"
const birth_year = 1989
</pre>

<p>
类型在变量名后面，定义时进行初始化，可以省略变量类型, <code>:=</code> 可以替代 <code>var</code>, 不能使用在函数外
</p>

<p>
常量用 const 关键字，不能用 <code>:=</code> 定义
</p>

<p>
变量的类型转换必须是显式转换。
</p>

<h3 id="toc_0.0.3">流程控制</h3>

<p>
<code>for</code> 和 <code>if</code> 语句除了没有'()', 其他基本跟 C 类似。
</p>

<p>
<code>for</code> 跟 C 一样，前置和后置语句都可以为空，不一样的是，当前置或后置语句为空时，分号 ';' 可以省略。
前置、后置语句都为空，跟 C 里面的 <code>while</code> 就一样了，如果又省略了循环条件，只剩下一个 <code>for</code> ，就是死循环
</p>
<pre class="go">
for {
// 死循环
}
</pre>

<p>
可以在条件之前加一个语句，这个语句定义的变量可以在当前的 <code>if</code> (包括其对应的 <code>else</code>, 如果有的话) 或 <code>for</code> 范围之内使用
</p>

<pre class="go">
package main

import (
    "fmt"
    "math"
)

func pow(x, n, lim float64) float64 {
    if v := math.Pow(x, n); v &lt; lim {
        return v
    } else {
        fmt.Printf("%g &gt;= %g\n", v, lim)
    }
    // 这里开始就不能使用 v 了
    return lim
}

func main() {
    fmt.Println(
        pow(3, 2, 10),
        pow(3, 3, 20),
    )
}
</pre>

<pre class="go">
package main

import (
    "fmt"
)

func Sqrt(x float64) float64 {
    z := 1.0
    for i := 0; i &lt; 10; i++ {
        z = z - (z * z - x) / (2 * z)
    }
    return z
}

func main() {
    fmt.Println(Sqrt(2))
}
</pre>

<h4 id="toc_0.0.3.1">switch</h4>
<p>
<code>switch</code> 后面不必是整数，也可以什么都没有。可以替代 C 中 <code>if  -  else if  -  else</code> 这样的语句。
</p>

<pre class="go">
func main() {
    // 这里的条件是字符串
    fmt.Print("Go runs on ")
    switch os := runtime.GOOS; os {
    case "darwin":
        fmt.Println("OS X.")
    case "linux":
        fmt.Println("Linux.")
    default:
        // freebsd, openbsd,
        // plan9, windows...
        fmt.Printf("%s.", os)
    }
}
</pre>

<p>
执行过程从上到下，直到匹配的项，不在继续往下执行。
</p>
<pre class="go">
i := 0
switch i {
    case 0:
        // ...
    case f():
        // ...
}
// 不会执行 f()
</pre>

<p>
默认每个 <code>case</code> 结尾都相当与带了 C 语言中的 <code>break</code>, 也就时执行完这个 <code>case</code> 里的代码就跳出 <code>switch</code> 块。除非在结尾加上 <code>fallthrough</code>, 这样会继续执行下面 <code>case</code> 中的代码
</p>

<pre class="go">
integer := 6
switch integer {
    case 4:
    fmt.Println("The integer was &lt;= 4")
    fallthrough
    case 5:
    fmt.Println("The integer was &lt;= 5")
    fallthrough
    case 6:
    fmt.Println("The integer was &lt;= 6")
    fallthrough
    case 7:
    fmt.Println("The integer was &lt;= 7")
    fallthrough
    case 8:
    fmt.Println("The integer was &lt;= 8")
    fallthrough
    default:
    fmt.Println("default case")
}
</pre>
<p>
输出
</p>
<pre>
The integer was &lt;= 6
The integer was &lt;= 7
The integer was &lt;= 8
default case
</pre>

<h3 id="toc_0.0.4">结构体</h3>
<p>
<em>TODO</em>
</p>

<hr />

<p>
其余内容基本上是 Go 自己有的了
</p>

            </div>
            <footer>
                <div class="row">
                    <div class="col-lg-12">
                        <p>
                        Generated by <a href="http://www.vim.org/scripts/script.php?script_id=2226">vimwiki</a> and <a href="http://bootswatch.com">Bootswatch</a>.
                        </p>
                    </div>
                </div>
            </footer>
        </div>
    </div>
</div>
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=32074356" charset="UTF-8"></script>
<script src="http://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script src="static/highlight/highlight.pack.js"></script>
<script type="text/javascript">
$(document).ready(function() {
        $('pre').each(function(i, e) {hljs.highlightBlock(e)});
        });
hljs.configure({
languages: []
})
hljs.initHighlightingOnLoad();
</script>
<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-37422134-12']);
_gaq.push(['_trackPageview']);

(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 })();

</script>
</body>
</html>
